# Extract the range from SLURM_NODELIST and expand it into individual node names
NODES=$(echo $SLURM_NODELIST | tr -d 'c[]' | perl -pe 's/(\d+)-(\d+)/join(" ",$1..$2)/eg')

# Print content of NODES for debugging
echo "Content of TF CONFIG: $TF_CONFIG"

# Split the NODES string into an array using space as delimiter
IFS=' ' read -r -a NODE_ARRAY <<< "$NODES"

# Print the first and second elements of the NODE_ARRAY
#echo "First element of NODE_ARRAY: ${NODE_ARRAY[0]}"
#echo "Second element of NODE_ARRAY: ${NODE_ARRAY[1]}"

here=`pwd`
ssh c${NODE_ARRAY[1]} fuser -k 8000/tcp && pd $here; python3 cnnhw.py 1 >& tmp1 & fuser -k 8000/tcp && python3 cnnhw.py 0 >& tmp0 && fuser -k 8000/tcp && python3 cnnhw.py -1
